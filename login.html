<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | FluxoCerto</title>
    <link rel="shortcut icon" href="imgs/icon_Logo.png" type="image/x-icon">
    <link rel="stylesheet" href="./CSS/style.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <a href="index.html"><img src="imgs/logo.png" alt="FluxoCerto_Logo"></a>
            </div>
            <ul class="menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="mapa.html">Mapa SP</a></li>
                <li><a href="doacaoUsuario.html">Doe Agora</a></li>
            </ul>
        </nav>
    </header>   
    <div class="containerlogin">
        <div class="login_container">
            <h2>Login</h2>
            <p>Entre na sua conta agora e participe da nossa comunidade.</p>


            <form id="formLogin" class="form_login">
                <input type="email" name="email" placeholder="E-mail:" required>
                <input type="password" name="senha" placeholder="Senha:" required>
                <button type="submit" class="btn_login">Entrar</button>

            <form action="" method="post" class="form_login">
                <input type="email" name="email" placeholder="E-mail:" required>
                <input type="password" name="senha" placeholder="Senha:" required>
                <button type="submit" class="btn_login"><a href="index.html">Entrar</a></button>

            </form>
            <p class="texto_cadastrado">
                Não é cadastrado? <a href="cadastro.html">Clique Aqui!</a>
            </p>
        </div>
    </div>

    <script>
        const formLogin = document.getElementById("formLogin");
        if (formLogin) {
            formLogin.addEventListener("submit", function (e) {
                e.preventDefault();

                const email = e.target.email.value.trim().toLowerCase();
                const senha = e.target.senha.value;

                const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];

                if (usuarios.length === 0) {
                    alert("⚠️ Nenhum usuário cadastrado. Por favor, cadastre-se primeiro!");
                    return;
                }  

                const usuarioEncontrado = usuarios.find(u => u.email === email && u.senha === senha);

                if (usuarioEncontrado) {
                    localStorage.setItem("usuarioLogado", JSON.stringify(usuarioEncontrado));
                    alert(`✅ Bem-vindo(a), ${usuarioEncontrado.nome}! Redirecionando...`);
                    setTimeout(() => {
                        window.location.href = "index.html";
                    }, 1000);
                } else {
                    alert("❌ E-mail ou senha incorretos!");
                }
            });
        }
    </script>
</body>
</html>